{"ast":null,"code":"var _jsxFileName = \"/home/owlytics/Desktop/Grow AI/frontend/src/components/VideoPreview.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VideoPreview = ({\n  camera,\n  isLive,\n  apiBase\n}) => {\n  _s();\n  const [streamUrl, setStreamUrl] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    if (camera && isLive) {\n      // For test preview (from CameraForm)\n      if (camera.rtspUrl && !camera.id) {\n        setStreamUrl(`${apiBase}/preview-stream?rtspUrl=${encodeURIComponent(camera.rtspUrl)}`);\n      }\n      // For regular camera feed\n      else if (camera.id) {\n        setStreamUrl(`${apiBase}/stream/${camera.id}`);\n      }\n      setError(null);\n      setIsLoading(true);\n    } else {\n      setStreamUrl(null);\n      setIsLoading(false);\n    }\n  }, [camera, isLive, apiBase]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-preview\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-title\",\n        children: camera ? camera.name : \"No Camera Selected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"live-badge\",\n        children: \"LIVE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 20\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-placeholder\",\n      children: streamUrl ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            color: '#fff',\n            zIndex: 1,\n            padding: '10px',\n            background: 'rgba(0,0,0,0.5)',\n            borderRadius: '4px'\n          },\n          children: \"Loading stream...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: streamUrl,\n          alt: \"camera-live\",\n          style: {\n            width: \"100%\",\n            height: \"100%\",\n            objectFit: \"cover\",\n            backgroundColor: \"#000\"\n          },\n          onLoad: () => setIsLoading(false),\n          onError: e => {\n            console.error(\"Error loading stream:\", e);\n            setError(\"Unable to load video stream\");\n            setIsLoading(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : camera ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#777\",\n          padding: \"20px\",\n          textAlign: \"center\"\n        },\n        children: [error || \"Click 'Test' to check camera connection\", isLive && !streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"12px\",\n            marginTop: \"8px\"\n          },\n          children: \"Starting face recognition feed...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#777\",\n          padding: \"20px\",\n          textAlign: \"center\"\n        },\n        children: \"Select a camera to preview live feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPreview, \"k/2rOMVR949t2AnFGB0irr+Ef2o=\");\n_c = VideoPreview;\nexport default VideoPreview;\nvar _c;\n$RefreshReg$(_c, \"VideoPreview\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoPreview","camera","isLive","apiBase","_s","streamUrl","setStreamUrl","error","setError","isLoading","setIsLoading","rtspUrl","id","encodeURIComponent","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","style","position","color","zIndex","padding","background","borderRadius","src","alt","width","height","objectFit","backgroundColor","onLoad","onError","e","console","textAlign","fontSize","marginTop","_c","$RefreshReg$"],"sources":["/home/owlytics/Desktop/Grow AI/frontend/src/components/VideoPreview.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst VideoPreview = ({ camera, isLive, apiBase }) => {\r\n  const [streamUrl, setStreamUrl] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (camera && isLive) {\r\n      // For test preview (from CameraForm)\r\n      if (camera.rtspUrl && !camera.id) {\r\n        setStreamUrl(`${apiBase}/preview-stream?rtspUrl=${encodeURIComponent(camera.rtspUrl)}`);\r\n      }\r\n      // For regular camera feed\r\n      else if (camera.id) {\r\n        setStreamUrl(`${apiBase}/stream/${camera.id}`);\r\n      }\r\n      setError(null);\r\n      setIsLoading(true);\r\n    } else {\r\n      setStreamUrl(null);\r\n      setIsLoading(false);\r\n    }\r\n  }, [camera, isLive, apiBase]);\r\n\r\n  return (\r\n    <div className=\"video-preview\">\r\n      <div className=\"video-header\">\r\n        <div className=\"video-title\">\r\n          {camera ? camera.name : \"No Camera Selected\"}\r\n        </div>\r\n        {isLive && <div className=\"live-badge\">LIVE</div>}\r\n      </div>\r\n\r\n      <div className=\"video-placeholder\">\r\n        {streamUrl ? (\r\n          <>\r\n            {isLoading && (\r\n              <div style={{\r\n                position: 'absolute',\r\n                color: '#fff',\r\n                zIndex: 1,\r\n                padding: '10px',\r\n                background: 'rgba(0,0,0,0.5)',\r\n                borderRadius: '4px'\r\n              }}>\r\n                Loading stream...\r\n              </div>\r\n            )}\r\n            <img\r\n              src={streamUrl}\r\n              alt=\"camera-live\"\r\n              style={{ \r\n                width: \"100%\", \r\n                height: \"100%\", \r\n                objectFit: \"cover\",\r\n                backgroundColor: \"#000\"\r\n              }}\r\n              onLoad={() => setIsLoading(false)}\r\n              onError={(e) => {\r\n                console.error(\"Error loading stream:\", e);\r\n                setError(\"Unable to load video stream\");\r\n                setIsLoading(false);\r\n              }}\r\n            />\r\n          </>\r\n        ) : camera ? (\r\n          <div style={{ color: \"#777\", padding: \"20px\", textAlign: \"center\" }}>\r\n            {error || \"Click 'Test' to check camera connection\"}\r\n            {isLive && !streamUrl && (\r\n              <div style={{ fontSize: \"12px\", marginTop: \"8px\" }}>\r\n                Starting face recognition feed...\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div style={{ color: \"#777\", padding: \"20px\", textAlign: \"center\" }}>\r\n            Select a camera to preview live feed\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPreview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}