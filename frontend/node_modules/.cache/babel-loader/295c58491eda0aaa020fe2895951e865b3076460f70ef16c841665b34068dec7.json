{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoPreview=_ref=>{let{camera,isLive,apiBase}=_ref;const[streamUrl,setStreamUrl]=useState(null);const[error,setError]=useState(null);useEffect(()=>{if(camera&&isLive){// For test preview (from CameraForm)\nif(camera.rtspUrl&&!camera.id){setStreamUrl(\"\".concat(apiBase,\"/preview-stream?rtspUrl=\").concat(encodeURIComponent(camera.rtspUrl)));}// For regular camera feed\nelse if(camera.id){setStreamUrl(\"\".concat(apiBase,\"/stream/\").concat(camera.id));}setError(null);}else{setStreamUrl(null);}},[camera,isLive,apiBase]);return/*#__PURE__*/_jsxs(\"div\",{className:\"video-preview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-title\",children:camera?camera.name:\"No Camera Selected\"}),isLive&&/*#__PURE__*/_jsx(\"div\",{className:\"live-badge\",children:\"LIVE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-placeholder\",children:streamUrl?/*#__PURE__*/_jsx(\"img\",{src:streamUrl,alt:\"camera-live\",style:{width:\"100%\",height:\"100%\",objectFit:\"cover\",backgroundColor:\"#000\"},onError:e=>{console.error(\"Error loading stream:\",e);setError(\"Unable to load video stream\");}}):camera?/*#__PURE__*/_jsx(\"div\",{style:{color:\"#777\"},children:error||\"Click Test to check camera connection\"}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#777\"},children:\"Select a camera to preview live feed\"})})]});};export default VideoPreview;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","VideoPreview","_ref","camera","isLive","apiBase","streamUrl","setStreamUrl","error","setError","rtspUrl","id","concat","encodeURIComponent","className","children","name","src","alt","style","width","height","objectFit","backgroundColor","onError","e","console","color"],"sources":["C:/Users/akash/OneDrive/Desktop/Grow AI/frontend/src/components/VideoPreview.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst VideoPreview = ({ camera, isLive, apiBase }) => {\r\n  const [streamUrl, setStreamUrl] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (camera && isLive) {\r\n      // For test preview (from CameraForm)\r\n      if (camera.rtspUrl && !camera.id) {\r\n        setStreamUrl(`${apiBase}/preview-stream?rtspUrl=${encodeURIComponent(camera.rtspUrl)}`);\r\n      }\r\n      // For regular camera feed\r\n      else if (camera.id) {\r\n        setStreamUrl(`${apiBase}/stream/${camera.id}`);\r\n      }\r\n      setError(null);\r\n    } else {\r\n      setStreamUrl(null);\r\n    }\r\n  }, [camera, isLive, apiBase]);\r\n\r\n  return (\r\n    <div className=\"video-preview\">\r\n      <div className=\"video-header\">\r\n        <div className=\"video-title\">\r\n          {camera ? camera.name : \"No Camera Selected\"}\r\n        </div>\r\n        {isLive && <div className=\"live-badge\">LIVE</div>}\r\n      </div>\r\n\r\n      <div className=\"video-placeholder\">\r\n        {streamUrl ? (\r\n          <img\r\n            src={streamUrl}\r\n            alt=\"camera-live\"\r\n            style={{ \r\n              width: \"100%\", \r\n              height: \"100%\", \r\n              objectFit: \"cover\",\r\n              backgroundColor: \"#000\"\r\n            }}\r\n            onError={(e) => {\r\n              console.error(\"Error loading stream:\", e);\r\n              setError(\"Unable to load video stream\");\r\n            }}\r\n          />\r\n        ) : camera ? (\r\n          <div style={{ color: \"#777\" }}>\r\n            {error || \"Click Test to check camera connection\"}\r\n          </div>\r\n        ) : (\r\n          <div style={{ color: \"#777\" }}>\r\n            Select a camera to preview live feed\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPreview;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAiC,IAAhC,CAAEC,MAAM,CAAEC,MAAM,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAC/C,KAAM,CAACI,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,GAAIO,MAAM,EAAIC,MAAM,CAAE,CACpB;AACA,GAAID,MAAM,CAACO,OAAO,EAAI,CAACP,MAAM,CAACQ,EAAE,CAAE,CAChCJ,YAAY,IAAAK,MAAA,CAAIP,OAAO,6BAAAO,MAAA,CAA2BC,kBAAkB,CAACV,MAAM,CAACO,OAAO,CAAC,CAAE,CAAC,CACzF,CACA;AAAA,IACK,IAAIP,MAAM,CAACQ,EAAE,CAAE,CAClBJ,YAAY,IAAAK,MAAA,CAAIP,OAAO,aAAAO,MAAA,CAAWT,MAAM,CAACQ,EAAE,CAAE,CAAC,CAChD,CACAF,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,IAAM,CACLF,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAC,CAAE,CAACJ,MAAM,CAAEC,MAAM,CAAEC,OAAO,CAAC,CAAC,CAE7B,mBACEL,KAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5Bf,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjB,IAAA,QAAKgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBZ,MAAM,CAAGA,MAAM,CAACa,IAAI,CAAG,oBAAoB,CACzC,CAAC,CACLZ,MAAM,eAAIN,IAAA,QAAKgB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,MAAI,CAAK,CAAC,EAC9C,CAAC,cAENjB,IAAA,QAAKgB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BT,SAAS,cACRR,IAAA,QACEmB,GAAG,CAAEX,SAAU,CACfY,GAAG,CAAC,aAAa,CACjBC,KAAK,CAAE,CACLC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,SAAS,CAAE,OAAO,CAClBC,eAAe,CAAE,MACnB,CAAE,CACFC,OAAO,CAAGC,CAAC,EAAK,CACdC,OAAO,CAAClB,KAAK,CAAC,uBAAuB,CAAEiB,CAAC,CAAC,CACzChB,QAAQ,CAAC,6BAA6B,CAAC,CACzC,CAAE,CACH,CAAC,CACAN,MAAM,cACRL,IAAA,QAAKqB,KAAK,CAAE,CAAEQ,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAC3BP,KAAK,EAAI,uCAAuC,CAC9C,CAAC,cAENV,IAAA,QAAKqB,KAAK,CAAE,CAAEQ,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAAC,sCAE/B,CAAK,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAd,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}